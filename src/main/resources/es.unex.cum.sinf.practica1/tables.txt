CREATE TABLE pablo_setrakian_bearzotti.packages_by_destination_and_duration
(
    destination_id uuid,
    duration       int,
    package_id     uuid,
    name           text,
    price          decimal,
    PRIMARY KEY ((destination_id, duration), package_id)
);
CREATE INDEX packages_new_idx ON pablo_setrakian_bearzotti.packages_by_destination_and_duration (package_id);

CREATE TABLE pablo_setrakian_bearzotti.package_summary
(
    package_id         uuid PRIMARY KEY,
    total_reservations counter
);

CREATE TABLE pablo_setrakian_bearzotti.reservations
(
    reservation_id uuid PRIMARY KEY,
    client_id      uuid,
    end_date       date,
    package_id     uuid,
    payed          boolean,
    start_date     date
);
CREATE INDEX reservations_end_date_idx ON pablo_setrakian_bearzotti.reservations (end_date);
CREATE INDEX package_id_idx ON pablo_setrakian_bearzotti.reservations (package_id);
CREATE INDEX client_id_idx ON pablo_setrakian_bearzotti.reservations (client_id);

CREATE TABLE pablo_setrakian_bearzotti.clients
(
    client_id uuid PRIMARY KEY,
    email     text,
    name      text,
    phone     text
);
CREATE INDEX clients_name_idx ON pablo_setrakian_bearzotti.clients (name);
CREATE INDEX email_index ON pablo_setrakian_bearzotti.clients (email);

CREATE TABLE pablo_setrakian_bearzotti.reservations_by_client_package_payed
(
    client_id      uuid,
    package_id     uuid,
    payed          boolean,
    reservation_id uuid,
    end_date       date,
    start_date     date,
    PRIMARY KEY ((client_id, package_id, payed), reservation_id)
);
CREATE INDEX reservations_by_client_package_payed_idx ON pablo_setrakian_bearzotti.reservations_by_client_package_payed (reservation_id);

CREATE TABLE pablo_setrakian_bearzotti.packages
(
    package_id     uuid PRIMARY KEY,
    destination_id uuid,
    duration       int,
    name           text,
    price          decimal
);
CREATE INDEX packages_destination_id_idx ON pablo_setrakian_bearzotti.packages (destination_id);
CREATE INDEX packages_name_idx ON pablo_setrakian_bearzotti.packages (name);

CREATE TABLE pablo_setrakian_bearzotti.destinations
(
    destination_id uuid PRIMARY KEY,
    country        text,
    description    text,
    name           text,
    weather        text
);
CREATE INDEX destinations_country_idx ON pablo_setrakian_bearzotti.destinations (country);
CREATE INDEX destinations_name_idx ON pablo_setrakian_bearzotti.destinations (name);
CREATE INDEX destinations_weather_idx ON pablo_setrakian_bearzotti.destinations (weather);